<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%= title%>
    </title>
</head>
<%- include('partials/header') %>

    <body>
        <section class="main-content columns is-fullheight">
            <a href="/" class="button is-primary" style="margin-top: 1rem">Back</a>
            <div class="container column is-10" style="height: max-content">
                <div class="section">
                    <div class="card">
                        <div class="card-header">
                            <p class="card-header-title">User Information</p>
                        </div>
                        <div class="card-content">
                            <div class="content">
                                <div class="columns">
                                    <div class="column is-2">
                                        <img src="https://via.placeholder.com/300" alt="Placeholder image" />
                                    </div>
                                    <div class="column is-10">
                                        <div class="columns is-mobile">
                                            <div class="column is-6">
                                                <p class="title is-6">
                                                    <span class="icon"><i class="fa fa-user"></i></span>Name: <%=
                                                        user.name %>
                                                </p>
                                                <p class="subtitle is-6">
                                                <p class="title is-6">
                                                    <span class="icon"><i class="fa fa-envelope"></i></span>Username:
                                                    <%= user.username %>
                                                </p>
                                                </p>
                                            </div>
                                            <div class="column is-6">
                                                <p class="title is-6">
                                                    <span class="icon"><i class="fa fa-calendar"></i></span>Year of
                                                    Birth: <%= user.YOB %>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br />

                    <div class="card">
                        <% if(success_msg != ''){ %>
                            <div class="notification is-success" >
                              <%= success_msg %>
                             
                            </div>
                        <% } %>
                        <% if(error_msg != ''){ %>
                          <div class="notification is-warning">
                            <%= error_msg %>
                          
                          </div>
                        <% } %>
                        
                        <% if(error != ''){ %>
                          <div class="notification is-warning">
                            <%= error %>
                          
                          </div>
                        <% } %>
                        <div class="card-header">
                            <p class="card-header-title">Edit Profile</p>
                        </div>
                        <div class="card-content">
                            <div class="content">
                                <form action="/profile" method="POST">
                                    <div class="field">
                                        <label class="label">Name</label>
                                        <div class="control">
                                            <input class="input" type="text" placeholder="input name" name="name" value="<%= user.name%>" required/>
                                        </div>
                                    </div>

                                    <div class="field">
                                        <label class="label">Username</label>
                                        <div class="control has-icons-left has-icons-right">
                                            <input class="input" type="email" placeholder="Input username"
                                                name="username" value="<%= user.username%>" required/>
                                            <span class="icon is-small is-left">
                                                <i class="fas fa-user"></i>
                                            </span>
                                            <span class="icon is-small is-right">
                                                <i class="fas fa-check"></i>
                                            </span>
                                        </div>
                                    </div>

                                    <div class="field">
                                        <label class="label">Year of Birth</label>
                                        <div class="control">
                                            <input class="input" type="number" placeholder="Input year of birth" name="YOB" value="<%= user.YOB%>" required />
                                        </div>
                                    </div>

                                    <div class="field">
                                        <div class="control">
                                            <button class="button is-link" type="submit">Submit</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <br />

                    
                    <% if(successPassword_msg != ''){ %>
                        <div class="notification is-success" >
                          <%= successPassword_msg %>
                         
                        </div>
                    <% } %>
                    <% if(errorPassword_msg != ''){ %>
                      <div class="notification is-warning">
                        <%= errorPassword_msg %>
                      
                      </div>
                    <% } %>
                    
                    <% if(errorPassword.length > 0){ %>
                        <% errorPassword.forEach( (error) => { %>
                          <div class="notification is-warning">
                            <%= error.msg %>
                          </div>
                        <% }) %>
                    <% } %>
                    <div class="card">
                        <div class="card-header">
                            <p class="card-header-title">Change Password</p>
                        </div>
                        <div class="card-content">
                            <div class="content">
                                <form action="/profile/change-password" method="POST">
                                    <div class="field">
                                        <label class="label">Old Password</label>
                                        <div class="control">
                                            <input class="input" type="password" placeholder="Input old password"
                                                name="oldPassword" />
                                        </div>
                                    </div>

                                    <div class="field">
                                        <label class="label">New Password</label>
                                        <div class="control">
                                            <input id="password" class="input" type="password" placeholder="Input new password"
                                                name="newPassword" />
                                        </div>
                                    </div>

                                    <div class="field">
                                        <label class="label">Confirm New Password</label>
                                        <div class="control">
                                            <input id="confirmPassword" class="input" type="password" placeholder="Confirm new password"
                                                name="confirmNewPassword" />
                                        </div>
                                    </div>

                                    <div class="field">
                                        <div class="control">
                                            <button class="button is-link" type="submit">Change</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </body>
    <%- include('partials/footer') %>

</html>